<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//uporm.github.io//DTD Mapper 1//EN" "https://uporm.github.io/dtd/uorm-1-mapper.dtd">
<mapper namespace="workspace_tag">

    <sql id="cols">
            id,
            tenant_id,
            workspace_id,
            tag_type,
            name,
            create_at,
            update_at
    </sql>

    <select id="list">
        SELECT
        <include refid="cols"/>
        FROM workspace_tag
        WHERE tenant_id = #{tenantId}
        AND workspace_id = #{workspaceId}
        AND tag_type = #{tagType}
    </select>

    <insert id="insert">
        INSERT INTO workspace_tag (id, tenant_id, workspace_id, tag_type, name, create_at, update_at)
        VALUES (#{id}, #{tenantId}, #{workspaceId}, #{tagType}, #{name}, NOW(), NOW())
    </insert>

    <update id="update">
        UPDATE workspace_tag
        SET name = #{name},
        update_at = NOW()
        WHERE id = #{id}
        AND tenant_id = #{tenantId}
        AND workspace_id = #{workspaceId}
        AND tag_type = #{tagType}
    </update>

    <delete id="delete">
        DELETE
        FROM workspace_tag
        WHERE id = #{id}
        AND tenant_id = #{tenantId}
        AND workspace_id = #{workspaceId}
        AND tag_type = #{tagType}
    </delete>

    <select id="get">
        SELECT
        <include refid="cols"/>
        FROM workspace_tag
        WHERE id = #{id}
        AND tenant_id = #{tenantId}
        AND workspace_id = #{workspaceId}
        AND tag_type = #{tagType}
    </select>
</mapper>
